<nav class="sidebar sidebar-offcanvas" id="sidebar">
    <ul class="nav">

        <li class="nav-item">
            <a class="nav-link">
                <span class="menu-title"><button class="file-upload-browse btn btn-gradient-danger" type="button" (click)="openNewProjectModal(newProjectModalContent)"> <i class="fa-solid fa-plus"></i> Add new Project</button></span>
            </a>
        </li>

        <li *ngFor="let project of projects" class="nav-item">
            <a class="nav-link" (click)="gotoProjectPageDescription(project)" [attr.aria-expanded]="!project.collapsed" aria-controls="ui-basic">
                <span class="menu-title">{{project.name}}</span>
                <i class="menu-arrow"></i>
                <i class="{{project.icon}} text-primary menu-icon"></i>
            </a>
            <div class="collapse" id="ui-basic" [ngbCollapse]="project.collapsed">
                <ul class="nav flex-column sub-menu">
                    <li *ngFor="let section of project.sections" class="nav-item"> <a class="nav-link" (click)="gotoProjectPage(project._id, section._id)" routerLinkActive="active" #accordions="routerLinkActive">{{section.name}}</a></li>
                    <!-- <li class="nav-item">
                        <a class="nav-link">
                            <span class="menu-title"><button class="btn btn-sm btn-rounded btn-gradient-primary" type="button" (click)="openModalForSection(addNewSectionModalContent, project._id)">Add new Section</button></span>
                        </a>
                    </li> -->
                </ul>
            </div>
        </li>


        <!-- <li class="nav-item nav-profile">
            <a href="javascript:;" class="nav-link">
                <div class="nav-profile-image">
                    <img src="assets/images/faces/face1.jpg" alt="profile">
                    <span class="login-status online"></span>
                </div>
                <div class="nav-profile-text">
                    <span class="font-weight-bold mb-2">David Grey. H</span>
                    <span class="text-secondary text-small">Project Manager</span>
                </div>
                <i class="mdi mdi-bookmark-check text-success nav-profile-badge"></i>
            </a>
        </li> -->
        <!-- <li class="nav-item" [ngClass]="{ 'active': dashboard.isActive }">
            <a class="nav-link" routerLink="/dashboard" routerLinkActive #dashboard="routerLinkActive">
                <span class="menu-title">Dashboard</span>
                <i class="mdi mdi-home menu-icon"></i>
            </a>
        </li> -->
        <!-- <li class="nav-item" [ngClass]="{'active' : accordions.isActive || buttons.isActive || badges.isActive || breadcrumbs.isActive || dropdowns.isActive || modals.isActive || notifications.isActive || progressbar.isActive || pagination.isActive || tabs.isActive || typography.isActive || tooltips.isActive }">
            <a class="nav-link" (click)="uiBasicCollapsed = !uiBasicCollapsed" [attr.aria-expanded]="uiBasicCollapsed" aria-controls="ui-basic">
                <span class="menu-title">Basic UI Elements</span>
                <i class="menu-arrow"></i>
                <i class="mdi mdi-crosshairs-gps menu-icon"></i>
            </a>
            <div class="collapse" id="ui-basic" [ngbCollapse]="!uiBasicCollapsed">
                <ul class="nav flex-column sub-menu">
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/accordions" routerLinkActive="active" #accordions="routerLinkActive">Accordions</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/buttons" routerLinkActive="active" #buttons="routerLinkActive">Buttons</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/badges" routerLinkActive="active" #badges="routerLinkActive">Badges</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/breadcrumbs" routerLinkActive="active" #breadcrumbs="routerLinkActive">Breadcrumbs</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/dropdowns" routerLinkActive="active" #dropdowns="routerLinkActive">Dropdowns</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/modals" routerLinkActive="active" #modals="routerLinkActive">Modals</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/notifications" routerLinkActive="active" #notifications="routerLinkActive">Notifications</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/progressbar" routerLinkActive="active" #progressbar="routerLinkActive">Progress bar</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/pagination" routerLinkActive="active" #pagination="routerLinkActive">Pagination</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/tabs" routerLinkActive="active" #tabs="routerLinkActive">Tabs</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/typography" routerLinkActive="active" #typography="routerLinkActive">Typography</a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="basic-ui/tooltips" routerLinkActive="active" #tooltips="routerLinkActive">Tooltips</a></li>
                </ul>
            </div>
        </li> -->
        <!-- <li class="nav-item" [ngClass]="{ 'active': forms.isActive }">
            <a class="nav-link" routerLink="forms/basic-elements" routerLinkActive #forms="routerLinkActive">
                <span class="menu-title">Form elements</span>
                <i class="mdi mdi-format-list-bulleted menu-icon"></i>
            </a>
        </li> -->
        <!-- <li class="nav-item" [ngClass]="{ 'active': charts.isActive }">
            <a class="nav-link" routerLink="home" routerLinkActive #charts="routerLinkActive">
                <span class="menu-title">Home</span>
                <i class="mdi mdi-home menu-icon"></i>
            </a>
        </li> -->
        <!-- <li class="nav-item" [ngClass]="{ 'active': charts.isActive }">
            <a class="nav-link" routerLink="charts/chartjs" routerLinkActive #charts="routerLinkActive">
                <span class="menu-title">Charts</span>
                <i class="mdi mdi-chart-bar menu-icon"></i>
            </a>
        </li> -->
        <!-- <li class="nav-item" [ngClass]="{ 'active': tables.isActive }">
            <a class="nav-link" routerLink="tables/basic-table" routerLinkActive #tables="routerLinkActive">
                <span class="menu-title">Tables</span>
                <i class="mdi mdi-table-large menu-icon"></i>
            </a>
        </li> -->
        <li class="nav-item" [ngClass]="{ 'active': icons.isActive }">
            <a class="nav-link" routerLink="icons/mdi" routerLinkActive #icons="routerLinkActive">
                <span class="menu-title">Icons</span>
                <i class="mdi mdi-contacts menu-icon"></i>
            </a>
        </li>
        <li class="nav-item">
            <!-- <a class="nav-link" (click)="samplePagesCollapsed = !samplePagesCollapsed" [attr.aria-expanded]="samplePagesCollapsed" aria-controls="auth">
                <span class="menu-title">Sample Pages</span>
                <i class="menu-arrow"></i>
                <i class="mdi mdi-medical-bag menu-icon"></i>
            </a> -->
            <!-- <div class="collapse" id="auth" [ngbCollapse]="!samplePagesCollapsed">
                <ul class="nav flex-column sub-menu">
                    <li class="nav-item"> <a class="nav-link" routerLink="general-pages/blank-page" routerLinkActive="active" #blankPage="routerLinkActive"> Blank Page </a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="user-pages/login" routerLinkActive="active" #login="routerLinkActive"> Login </a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="user-pages/register" routerLinkActive="active" #register="routerLinkActive"> Register </a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="error-pages/404" routerLinkActive="active" #error404="routerLinkActive"> 404 </a></li>
                    <li class="nav-item"> <a class="nav-link" routerLink="error-pages/500" routerLinkActive="active" #error500="routerLinkActive"> 500 </a></li>
                </ul>
            </div> -->
        </li>

        <!-- <li class="nav-item" (click)="refresh()">
            <h3 class="page-title">
                <i class="page-title-icon mdi mdi-refresh"></i>
            </h3>
        </li> -->
    </ul>
</nav>

<!-- Add new Project Modal starts -->
<ng-template class="modal fade" #newProjectModalContent let-modal>
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="exampleModalLabel">Create a new Project</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="modal.dismiss()">
                  <span aria-hidden="true">&times;</span>
                </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <input #addproject_name type="text" class="form-control form-control-lg" placeholder="Project Name">
            </div>
            <div class="form-group">
                <textarea #addproject_description class="form-control form-control-lg" placeholder="Project Description"></textarea>
            </div>
            <div class="form-group">
                <input #addproject_icon class="form-control form-control-lg" placeholder="Icon">
            </div>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-success" (click)="addProject(addproject_name.value, addproject_description.value, addproject_icon.value)">Add</button>
            <button type="button" class="btn btn-light" data-dismiss="modal" (click)="modal.close()">Cancel</button>
        </div>
    </div>
</ng-template>
<!-- Modal Ends -->

<!-- Modal starts -->
<ng-template class="modal fade" #addNewSectionModalContent let-modal>
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="addNewSectionModalLabel">Create a new Section</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="modal.dismiss()">
                  <span aria-hidden="true">&times;</span>
                </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <input #addsection_name type="text" class="form-control form-control-lg" placeholder="Section Name">
            </div>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-success" (click)="addNewSection(addsection_name.value)">Add</button>
            <button type="button" class="btn btn-light" data-dismiss="modal" (click)="modal.close()">Cancel</button>
        </div>
    </div>
</ng-template>
<!-- Modal Ends -->